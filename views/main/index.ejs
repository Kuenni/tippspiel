<script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>
<body ng-app="mainPageApp">
	<div class="container" ng-controller="MainPageController">
		<div id="selectorsDiv">
		<span id="seasonSelectDiv">
			Saison:
			<select ng-model="selectedSeason">
				<option value="" disabled>---Bitte  w&auml;hlen---</option>
				<option ng-repeat="season in seasons" value="season.seasonName">
					{{season.seasonName}}
				</option>
				<option ng-click="addSeason()" value="">
					Saison hinzuf&uuml;gen...
				</option>
			</select>
		</span>
		<span id="matchdaySelectDiv" ng-if="selectedSeason" ng-init="false" >
			Spieltag:
			<select ng-options="day.name for day in matchdays" ng-model="$parent.selectedMatchday"
			ng-change="printSelectedMatchday()" >
			<option disabled value="">---Bitte  w&auml;hlen---</option>
			</select>
		</span>
		</div>
		<div id="betsDiv" ng-if="selectedMatchday" ng-init="false">
		  <div id="resultsTable">
				<table class="table table-striped table-hover">
					<thead>
						<th></th>
						<th>Heim</th>
						<th></th>
						<th>Gast</th>
						<th class="text-center">Tore Heim</th>
						<th></th>
						<th class="text-center">Tore Gast</th>
						<th></th>
						<th class="text-center">Ergebnis Heim</th>
						<th></th>
						<th class="text-center">Ergebnis Gast</th>
						<th></th>
						<th class="text-center">Punkte</th>
					</thead>
					<tr ng-repeat="bet in bets">
						<td><img src={{bet.logoTeamHome}}></td>
						<td>{{bet.teamhome}}</td>
						<td><img src={{bet.logoTeamGuest}}></td>
						<td>{{bet.teamguest}}</td>
						<td>
						<input type="text" class="text-center" ng-model="bet.betHome"/>
						</td>
						<td class="text-center">:</td>
						<td>
						<input type="text" class="text-center" ng-model="bet.betGuest"/>
						</td>
						<td></td>
						<td class="text-center">
							{{bet.cachedGoalsHome}}
						</td>
						<td class="text-center">:</td>
						<td class="text-center">
							{{bet.cachedGoalsGuest}}
						</td>
						<td></td>
						<td class="text-center">{{bet.cachedPoints}}</td>
					</tr>
				</table>
				<button ng-click="storeUpdates()">Speichern</button>
			</div>
		</div>

		<div ng-if="!loggedIn">
			<h2><span class="label label-warning">Nicht eingeloggt!</span></h2>
			<form class="form-inline" id="login-form">
				<div class="form-group">
					<label for="loginName">Name</label>
					<input type="text" id="loginName" placeholder="name" class="form-control" />
				</div>
				<div class="form-group">
					<label for="loginPassword">Password</label>
					<input type="password" id="loginPassword" placeholder="password" class="form-control" />
				</div>
				<button type="submit" class="btn btn-primary" ng-click="login()">
					Login
				</button>
			</form>
		</div>
		<div id="userRanking">
			<table class="table table-striped table-hover">
				<thead>
					<th>User</th>
					<th class="text-center">Correct</th>
					<th class="text-center">Difference</th>
					<th class="text-center">Tendency</th>
					<th class="text-center">Total Points</th>
				</thead>
				<tr ng-repeat="item in users | orderBy:'-correct'">
					<td>{{item.username}}</td>
					<td class="text-center">{{item.nCorrect}}</td>
					<td class="text-center">{{item.nDiff}}</td>
					<td class="text-center">{{item.nTrend}}</td>
					<td class="text-center">{{getSum(item)}}</td>
				</tr>
			</table>
		</div>
		<div id="teamRanking">
			<table class="table table-striped table-hover">
				<thead>
					<th>Team</th>
					<th class="text-center">Won</th>
					<th class="text-center">Draw</th>
					<th class="text-center">Lost</th>
					<th class="text-center">Total Points</th>
				</thead>
				<tr ng-repeat="item in teams | orderBy:'-points'">
					<td>{{item.name}}</td>
					<td class="text-center">{{item.wins}}</td>
					<td class="text-center">{{item.draws}}</td>
					<td class="text-center">{{item.losses}}</td>
					<td class="text-center">{{item.points}}</td>
				</tr>
			</table>
		</div>
		<div id="usertimeline">
			<svg class="chart" id="timeline"></svg>
		</div>
	</div>
</body>